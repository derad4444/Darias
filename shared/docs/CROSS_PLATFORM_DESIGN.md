# Character ã‚¢ãƒ—ãƒª ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ è¨­è¨ˆæ›¸

## æ¦‚è¦

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€æ—¢å­˜ã®iOSç‰ˆCharacterã‚¢ãƒ—ãƒªã‚’ Flutter ã§å†æ§‹ç¯‰ã—ã€iOS/Android/Web ã®3ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å±•é–‹ã™ã‚‹ãŸã‚ã®è¨­è¨ˆæ›¸ã§ã™ã€‚

---

## 1. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå±¤                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Flutter Application                         â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚   â”‚   iOS App   â”‚  â”‚ Android App â”‚  â”‚   Web App   â”‚           â”‚  â”‚
â”‚  â”‚   â”‚  (App Store)â”‚  â”‚(Google Play)â”‚  â”‚  (ãƒ–ãƒ©ã‚¦ã‚¶)  â”‚           â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚  â”‚          â”‚                â”‚                â”‚                   â”‚  â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â”‚                           â”‚                                    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚   â”‚              å…±é€šãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤               â”‚           â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ State Management (Riverpod)                â”‚           â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ Repository Pattern                         â”‚           â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ Use Cases                                  â”‚           â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Firebase SDK
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å±¤ (å¤‰æ›´ãªã—)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Firebase Project                            â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚   â”‚  Firestore  â”‚  â”‚   Storage   â”‚  â”‚    Auth     â”‚           â”‚  â”‚
â”‚  â”‚   â”‚   (æ—¢å­˜DB)   â”‚  â”‚  (ç”»åƒä¿å­˜)  â”‚  â”‚  (èªè¨¼)     â”‚           â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚  â”‚   â”‚         Cloud Functions (Node.js)           â”‚             â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ generateSixPersonMeeting                 â”‚             â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ generateMonthlyReview                    â”‚             â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ sendRegistrationEmail                    â”‚             â”‚  â”‚
â”‚  â”‚   â”‚  â€¢ scheduledTasks                           â”‚             â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### Flutterå´

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ç”¨é€” |
|---------|--------------|------|
| **è¨€èª** | Dart 3.x | ãƒ¡ã‚¤ãƒ³é–‹ç™ºè¨€èª |
| **çŠ¶æ…‹ç®¡ç†** | Riverpod 2.x | ã‚¢ãƒ—ãƒªå…¨ä½“ã®çŠ¶æ…‹ç®¡ç† |
| **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°** | go_router | å®£è¨€çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |
| **Firebase** | FlutterFire | Firebaseé€£æº |
| | firebase_core | åˆæœŸåŒ– |
| | cloud_firestore | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| | firebase_auth | èªè¨¼ |
| | firebase_storage | ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ |
| | cloud_functions | Cloud Functionså‘¼ã³å‡ºã— |
| **èª²é‡‘** | in_app_purchase | iOS/Androidèª²é‡‘ |
| | purchases_flutter (RevenueCat) | èª²é‡‘ç®¡ç†ã®ç°¡ç´ åŒ– |
| **åºƒå‘Š** | google_mobile_ads | AdMobåºƒå‘Š |
| **ãƒ­ãƒ¼ã‚«ãƒ«DB** | drift (SQLite) | ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥ |
| **UI** | flutter_hooks | Reactãƒ©ã‚¤ã‚¯ãªãƒ•ãƒƒã‚¯ |
| | cached_network_image | ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥ |
| | flutter_animate | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ |
| **é€šçŸ¥** | firebase_messaging | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ |
| | flutter_local_notifications | ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥ |

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å´ (å¤‰æ›´ä¸è¦)

- Firebase Cloud Functions (Node.js 20)
- Firestore
- Firebase Storage
- Firebase Auth
- Firebase App Check

---

## 3. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
character_flutter/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                      # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ app.dart                       # ã‚¢ãƒ—ãƒªè¨­å®š
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                          # å…±é€šåŸºç›¤
â”‚   â”‚   â”œâ”€â”€ constants/                 # å®šæ•°å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ app_constants.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ firebase_constants.dart
â”‚   â”‚   â”‚   â””â”€â”€ subscription_constants.dart
â”‚   â”‚   â”œâ”€â”€ errors/                    # ã‚¨ãƒ©ãƒ¼å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ exceptions.dart
â”‚   â”‚   â”‚   â””â”€â”€ failures.dart
â”‚   â”‚   â”œâ”€â”€ extensions/                # æ‹¡å¼µãƒ¡ã‚½ãƒƒãƒ‰
â”‚   â”‚   â”‚   â”œâ”€â”€ date_extensions.dart
â”‚   â”‚   â”‚   â””â”€â”€ string_extensions.dart
â”‚   â”‚   â”œâ”€â”€ utils/                     # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.dart
â”‚   â”‚   â”‚   â””â”€â”€ validators.dart
â”‚   â”‚   â””â”€â”€ theme/                     # ãƒ†ãƒ¼ãƒè¨­å®š
â”‚   â”‚       â”œâ”€â”€ app_theme.dart
â”‚   â”‚       â”œâ”€â”€ colors.dart
â”‚   â”‚       â””â”€â”€ typography.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                          # ãƒ‡ãƒ¼ã‚¿å±¤
â”‚   â”‚   â”œâ”€â”€ models/                    # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ user_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ character_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ big5_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ post_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ diary_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ todo_model.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ memo_model.dart
â”‚   â”‚   â”‚   â””â”€â”€ subscription_model.dart
â”‚   â”‚   â”œâ”€â”€ datasources/               # ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ remote/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ firestore_datasource.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth_datasource.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ storage_datasource.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ functions_datasource.dart
â”‚   â”‚   â”‚   â””â”€â”€ local/
â”‚   â”‚   â”‚       â””â”€â”€ cache_datasource.dart
â”‚   â”‚   â””â”€â”€ repositories/              # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
â”‚   â”‚       â”œâ”€â”€ auth_repository_impl.dart
â”‚   â”‚       â”œâ”€â”€ character_repository_impl.dart
â”‚   â”‚       â”œâ”€â”€ chat_repository_impl.dart
â”‚   â”‚       â”œâ”€â”€ schedule_repository_impl.dart
â”‚   â”‚       â”œâ”€â”€ diary_repository_impl.dart
â”‚   â”‚       â”œâ”€â”€ todo_repository_impl.dart
â”‚   â”‚       â””â”€â”€ subscription_repository_impl.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ domain/                        # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”‚   â”œâ”€â”€ entities/                  # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”‚   â”œâ”€â”€ user.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ character.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ big5_analysis.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ post.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ diary.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ todo.dart
â”‚   â”‚   â”‚   â””â”€â”€ subscription.dart
â”‚   â”‚   â”œâ”€â”€ repositories/              # ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_repository.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ character_repository.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ chat_repository.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule_repository.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ diary_repository.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ todo_repository.dart
â”‚   â”‚   â”‚   â””â”€â”€ subscription_repository.dart
â”‚   â”‚   â””â”€â”€ usecases/                  # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
â”‚   â”‚       â”œâ”€â”€ auth/
â”‚   â”‚       â”‚   â”œâ”€â”€ sign_in_usecase.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ sign_up_usecase.dart
â”‚   â”‚       â”‚   â””â”€â”€ sign_out_usecase.dart
â”‚   â”‚       â”œâ”€â”€ character/
â”‚   â”‚       â”‚   â”œâ”€â”€ get_character_usecase.dart
â”‚   â”‚       â”‚   â””â”€â”€ update_character_usecase.dart
â”‚   â”‚       â”œâ”€â”€ chat/
â”‚   â”‚       â”‚   â”œâ”€â”€ send_message_usecase.dart
â”‚   â”‚       â”‚   â””â”€â”€ get_chat_history_usecase.dart
â”‚   â”‚       â”œâ”€â”€ big5/
â”‚   â”‚       â”‚   â”œâ”€â”€ submit_answer_usecase.dart
â”‚   â”‚       â”‚   â””â”€â”€ get_analysis_usecase.dart
â”‚   â”‚       â””â”€â”€ six_person_meeting/
â”‚   â”‚           â””â”€â”€ generate_meeting_usecase.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ presentation/                  # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”œâ”€â”€ providers/                 # Riverpod Providers
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_provider.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ character_provider.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ chat_provider.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule_provider.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ diary_provider.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ todo_provider.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ subscription_provider.dart
â”‚   â”‚   â”‚   â””â”€â”€ settings_provider.dart
â”‚   â”‚   â”œâ”€â”€ router/                    # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚   â”‚   â”‚   â””â”€â”€ app_router.dart
â”‚   â”‚   â”œâ”€â”€ screens/                   # ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ splash/
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ register_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ home_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ character/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ character_select_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ character_detail_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ chat_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ big5/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ big5_intro_screen.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ big5_question_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ big5_result_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ six_person_meeting/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ meeting_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ calendar_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ schedule_edit_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ diary/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ diary_list_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ diary_edit_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ todo/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ todo_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ memo/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ memo_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ settings_screen.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ subscription_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ account_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ contact/
â”‚   â”‚   â”‚       â””â”€â”€ contact_screen.dart
â”‚   â”‚   â””â”€â”€ widgets/                   # å…±é€šã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
â”‚   â”‚       â”œâ”€â”€ common/
â”‚   â”‚       â”‚   â”œâ”€â”€ app_button.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ app_text_field.dart
â”‚   â”‚       â”‚   â”œâ”€â”€ loading_indicator.dart
â”‚   â”‚       â”‚   â””â”€â”€ error_dialog.dart
â”‚   â”‚       â”œâ”€â”€ character/
â”‚   â”‚       â”‚   â”œâ”€â”€ character_avatar.dart
â”‚   â”‚       â”‚   â””â”€â”€ personality_badge.dart
â”‚   â”‚       â”œâ”€â”€ chat/
â”‚   â”‚       â”‚   â”œâ”€â”€ chat_bubble.dart
â”‚   â”‚       â”‚   â””â”€â”€ chat_input.dart
â”‚   â”‚       â”œâ”€â”€ ads/
â”‚   â”‚       â”‚   â”œâ”€â”€ banner_ad_widget.dart
â”‚   â”‚       â”‚   â””â”€â”€ rewarded_ad_manager.dart
â”‚   â”‚       â””â”€â”€ calendar/
â”‚   â”‚           â””â”€â”€ calendar_widget.dart
â”‚   â”‚
â”‚   â””â”€â”€ services/                      # å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹
â”‚       â”œâ”€â”€ analytics_service.dart
â”‚       â”œâ”€â”€ notification_service.dart
â”‚       â”œâ”€â”€ purchase_service.dart
â”‚       â””â”€â”€ ad_service.dart
â”‚
â”œâ”€â”€ test/                              # ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ widget/
â”‚   â””â”€â”€ integration/
â”‚
â”œâ”€â”€ web/                               # Webå›ºæœ‰è¨­å®š
â”‚   â””â”€â”€ index.html
â”‚
â”œâ”€â”€ android/                           # Androidå›ºæœ‰è¨­å®š
â”‚   â””â”€â”€ app/
â”‚       â””â”€â”€ build.gradle
â”‚
â”œâ”€â”€ ios/                               # iOSå›ºæœ‰è¨­å®š
â”‚   â””â”€â”€ Runner/
â”‚       â””â”€â”€ Info.plist
â”‚
â”œâ”€â”€ pubspec.yaml                       # ä¾å­˜é–¢ä¿‚
â””â”€â”€ firebase.json                      # Firebaseè¨­å®š
```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ç§»è¡Œãƒãƒƒãƒ”ãƒ³ã‚°

### Swift â†’ Dart å¤‰æ›ä¾‹

#### Character Model

**Swift (æ—¢å­˜)**
```swift
struct CharacterModels {
    struct Character: Codable, Identifiable {
        let id: String
        var name: String
        var gender: String
        var big5Scores: Big5Scores?
        var personalityKey: String?
        var createdAt: Date
        var updatedAt: Date
    }

    struct Big5Scores: Codable {
        var openness: Double
        var conscientiousness: Double
        var extraversion: Double
        var agreeableness: Double
        var neuroticism: Double
    }
}
```

**Dart (æ–°è¦)**
```dart
// lib/data/models/character_model.dart
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:freezed_annotation/freezed_annotation.dart';

part 'character_model.freezed.dart';
part 'character_model.g.dart';

@freezed
class CharacterModel with _$CharacterModel {
  const factory CharacterModel({
    required String id,
    required String name,
    required String gender,
    Big5ScoresModel? big5Scores,
    String? personalityKey,
    required DateTime createdAt,
    required DateTime updatedAt,
  }) = _CharacterModel;

  factory CharacterModel.fromJson(Map<String, dynamic> json) =>
      _$CharacterModelFromJson(json);

  factory CharacterModel.fromFirestore(DocumentSnapshot doc) {
    final data = doc.data() as Map<String, dynamic>;
    return CharacterModel(
      id: doc.id,
      name: data['name'] ?? '',
      gender: data['gender'] ?? '',
      big5Scores: data['big5Scores'] != null
          ? Big5ScoresModel.fromJson(data['big5Scores'])
          : null,
      personalityKey: data['personalityKey'],
      createdAt: (data['createdAt'] as Timestamp).toDate(),
      updatedAt: (data['updatedAt'] as Timestamp).toDate(),
    );
  }
}

@freezed
class Big5ScoresModel with _$Big5ScoresModel {
  const factory Big5ScoresModel({
    required double openness,
    required double conscientiousness,
    required double extraversion,
    required double agreeableness,
    required double neuroticism,
  }) = _Big5ScoresModel;

  factory Big5ScoresModel.fromJson(Map<String, dynamic> json) =>
      _$Big5ScoresModelFromJson(json);
}
```

---

## 5. ä¸»è¦æ©Ÿèƒ½ã®ç§»è¡Œè¨ˆç”»

### Phase 1: åŸºç›¤æ§‹ç¯‰ (å¿…é ˆ)

| æ©Ÿèƒ½ | å†…å®¹ | å„ªå…ˆåº¦ |
|-----|------|-------|
| FirebaseåˆæœŸåŒ– | core, auth, firestore, storage æ¥ç¶š | ğŸ”´ æœ€é«˜ |
| èªè¨¼ | ãƒ­ã‚°ã‚¤ãƒ³/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ | ğŸ”´ æœ€é«˜ |
| ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠ | æ€§åˆ¥é¸æŠã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¡¨ç¤º | ğŸ”´ æœ€é«˜ |
| ãƒ›ãƒ¼ãƒ ç”»é¢ | ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ | ğŸ”´ æœ€é«˜ |

### Phase 2: ã‚³ã‚¢æ©Ÿèƒ½

| æ©Ÿèƒ½ | å†…å®¹ | å„ªå…ˆåº¦ |
|-----|------|-------|
| ãƒãƒ£ãƒƒãƒˆ | ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¨ã®ä¼šè©±ã€å±¥æ­´è¡¨ç¤º | ğŸŸ  é«˜ |
| BIG5è¨ºæ–­ | è³ªå•è¡¨ç¤ºã€å›ç­”ä¿å­˜ã€çµæœè¡¨ç¤º | ğŸŸ  é«˜ |
| 6äººä¼šè­° | Cloud Functionså‘¼ã³å‡ºã—ã€çµæœè¡¨ç¤º | ğŸŸ  é«˜ |

### Phase 3: ã‚µãƒ–æ©Ÿèƒ½

| æ©Ÿèƒ½ | å†…å®¹ | å„ªå…ˆåº¦ |
|-----|------|-------|
| ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« CRUD | ğŸŸ¡ ä¸­ |
| æ—¥è¨˜ | æ—¥è¨˜ CRUD | ğŸŸ¡ ä¸­ |
| Todo | ã‚¿ã‚¹ã‚¯ç®¡ç† | ğŸŸ¡ ä¸­ |
| ãƒ¡ãƒ¢ | ãƒ¡ãƒ¢ CRUD | ğŸŸ¡ ä¸­ |

### Phase 4: åç›ŠåŒ–ãƒ»ãã®ä»–

| æ©Ÿèƒ½ | å†…å®¹ | å„ªå…ˆåº¦ |
|-----|------|-------|
| èª²é‡‘ | ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç† | ğŸŸ¢ é«˜ |
| åºƒå‘Š | ãƒãƒŠãƒ¼åºƒå‘Šã€ãƒªãƒ¯ãƒ¼ãƒ‰åºƒå‘Š | ğŸŸ¢ é«˜ |
| è¨­å®š | ãƒ•ã‚©ãƒ³ãƒˆã€ãƒ†ãƒ¼ãƒã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ | ğŸŸ¢ ä¸­ |
| é€šçŸ¥ | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã€ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥ | ğŸŸ¢ ä¸­ |
| ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ | iOS/Androidãƒ›ãƒ¼ãƒ ç”»é¢ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ | ğŸ”µ ä½ |

---

## 6. ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ã®æ³¨æ„ç‚¹

### iOS
- App Store å¯©æŸ»ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«æº–æ‹ 
- App Tracking Transparency (ATT) å¯¾å¿œ
- StoreKit 2 ã‹ã‚‰ in_app_purchase ã¸ã®ç§»è¡Œ
- ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ: home_widget ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½¿ç”¨

### Android
- Google Play å¯©æŸ»ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«æº–æ‹ 
- Google Play Billing Library å¯¾å¿œ
- é€šçŸ¥ãƒãƒ£ãƒ³ãƒãƒ«è¨­å®š
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰åˆ¶é™å¯¾å¿œ

### Web
- Firebase Hosting ã§ãƒ‡ãƒ—ãƒ­ã‚¤
- PWAå¯¾å¿œ (Service Worker)
- Stripeæ±ºæ¸ˆ (ã‚¢ãƒ—ãƒªå†…èª²é‡‘ã®ä»£æ›¿)
- åºƒå‘Š: Google AdSense ã«å¤‰æ›´
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ

---

## 7. èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      èª²é‡‘ãƒ•ãƒ­ãƒ¼                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   iOS/Android                     Web                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚ RevenueCat  â”‚                â”‚   Stripe    â”‚               â”‚
â”‚   â”‚    SDK      â”‚                â”‚  Checkout   â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚          â”‚                              â”‚                       â”‚
â”‚          â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                       â”‚
â”‚          â””â”€â”€â”€â”€â–º  Firebase         â—„â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚               â”‚  Cloud Functions  â”‚                             â”‚
â”‚               â”‚  (Webhookå‡¦ç†)    â”‚                             â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                         â”‚                                       â”‚
â”‚                         â–¼                                       â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚               â”‚    Firestore      â”‚                             â”‚
â”‚               â”‚ users/{id}/       â”‚                             â”‚
â”‚               â”‚ subscription/     â”‚                             â”‚
â”‚               â”‚ current           â”‚                             â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RevenueCat ã‚’æ¨å¥¨ã™ã‚‹ç†ç”±
- iOS/Android ã®èª²é‡‘ã‚’çµ±ä¸€API ã§ç®¡ç†
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰æ¤œè¨¼ãŒè‡ªå‹•
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§å£²ä¸Šåˆ†æ
- Firestore ã¨ã®é€£æºãŒå®¹æ˜“

---

## 8. ç§»è¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« (ç›®å®‰)

```
Week 1-2:   ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€Firebaseæ¥ç¶šã€èªè¨¼
Week 3-4:   ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠã€ãƒ›ãƒ¼ãƒ ç”»é¢
Week 5-6:   ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
Week 7-8:   BIG5è¨ºæ–­
Week 9-10:  6äººä¼šè­°
Week 11-12: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã€æ—¥è¨˜ã€Todoã€ãƒ¡ãƒ¢
Week 13-14: èª²é‡‘ã€åºƒå‘Š
Week 15-16: è¨­å®šã€é€šçŸ¥ã€ãƒ†ã‚¹ãƒˆ
Week 17-18: ãƒã‚°ä¿®æ­£ã€å¯©æŸ»å¯¾å¿œ
```

---

## 9. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

| ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ— | ãƒ„ãƒ¼ãƒ« | å¯¾è±¡ |
|------------|-------|------|
| Unit Test | flutter_test | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ¢ãƒ‡ãƒ« |
| Widget Test | flutter_test | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| Integration Test | integration_test | E2Eãƒ•ãƒ­ãƒ¼ |
| Golden Test | golden_toolkit | UIã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ |

---

## 10. CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```yaml
# GitHub Actions ã®ä¾‹
name: Flutter CI/CD

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: subosito/flutter-action@v2
      - run: flutter pub get
      - run: flutter test
      - run: flutter analyze

  build-android:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: subosito/flutter-action@v2
      - run: flutter build apk --release

  build-ios:
    needs: test
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v3
      - uses: subosito/flutter-action@v2
      - run: flutter build ios --release --no-codesign

  build-web:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: subosito/flutter-action@v2
      - run: flutter build web --release
      - uses: FirebaseExtended/action-hosting-deploy@v0
```

---

## 11. æ—¢å­˜iOSã‚¢ãƒ—ãƒªã‹ã‚‰ã®æ®µéšçš„ç§»è¡Œ

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: å®Œå…¨ç½®ãæ›ãˆ (æ¨å¥¨)
1. Flutterç‰ˆã‚’æ–°è¦é–‹ç™º
2. åŒã˜Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ¥ç¶š
3. æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãã®ã¾ã¾ãƒ­ã‚°ã‚¤ãƒ³å¯èƒ½
4. App Store ã§æ—¢å­˜ã‚¢ãƒ—ãƒªã‚’æ›´æ–°

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: ä¸¦è¡Œé‹ç”¨
1. Flutterç‰ˆã‚’åˆ¥ã‚¢ãƒ—ãƒªã¨ã—ã¦ãƒªãƒªãƒ¼ã‚¹
2. æ—¢å­˜iOSã‚¢ãƒ—ãƒªã¯ä¿å®ˆãƒ¢ãƒ¼ãƒ‰
3. æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯Flutterç‰ˆã¸èª˜å°

**æ¨å¥¨**: ã‚ªãƒ—ã‚·ãƒ§ãƒ³A (1ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ãƒ¡ãƒªãƒƒãƒˆã‚’æœ€å¤§åŒ–)

---

## 12. ã¾ã¨ã‚

### ã“ã®è¨­è¨ˆã®åˆ©ç‚¹

1. **å˜ä¸€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹**: 1å›ã®æ”¹ä¿®ã§ iOS/Android/Web ã«åæ˜ 
2. **DBå…±é€š**: æ—¢å­˜Firestoreã‚’ãã®ã¾ã¾ä½¿ç”¨
3. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å¤‰æ›´ä¸è¦**: Cloud Functionsã¯å®Œå…¨æµç”¨
4. **ä¿å®ˆæ€§å‘ä¸Š**: ä»Šå¾Œã®æ©Ÿèƒ½è¿½åŠ ãŒ1ç®‡æ‰€ã§å®Œçµ
5. **ã‚³ã‚¹ãƒˆå‰Šæ¸›**: 3ã¤åˆ¥ã€…ã«é–‹ç™ºã™ã‚‹ã‚ˆã‚Šå¤§å¹…ã«ä½ã‚³ã‚¹ãƒˆ

### æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. Flutter é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ (`flutter create character_flutter`)
3. Firebase æ¥ç¶šè¨­å®š
4. Phase 1 ã®å®Ÿè£…é–‹å§‹

---

*æœ€çµ‚æ›´æ–°: 2026-01-16*
